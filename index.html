<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>A Game Of Surveys</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: white;
}

#topLeft {
  position: absolute;
  top: 10px;
  left: 10px;
  font-size: 16px;
}

#topRight {
  position: absolute;
  top: 10px;
  right: 10px;
  font-size: 16px;
}

#progress {
  text-align: center;
  font-size: 32px;
  margin-top: 40px;
}

#container {
  max-width: 700px;
  margin: 120px auto;
  text-align: center;
}

button {
  margin-top: 25px;
  padding: 10px 30px;
  font-size: 16px;
  cursor: pointer;
}

textarea {
  width: 90%;
  height: 80px;
}

label {
  display: block;
  margin: 6px;
}
</style>
</head>

<body>

<div id="topLeft"></div>
<div id="topRight"></div>
<div id="progress"></div>
<div id="container"></div>

<script>
/* =====================
   GLOBAL STATE
===================== */
let level = 0;
let step = 0;
let trickChance = 2.0;

/* =====================
   SAVE / LOAD
===================== */
function save() {
  localStorage.setItem("surveySave", JSON.stringify({ level, step, trickChance }));
}

function loadSave() {
  const data = JSON.parse(localStorage.getItem("surveySave"));
  if (data) {
    level = data.level;
    step = data.step;
    trickChance = data.trickChance;
  }
}

/* =====================
   DISQUALIFY
===================== */
function disqualify(msg) {
  localStorage.clear();
  document.body.innerHTML =
    `<h1 style="text-align:center;margin-top:120px;">${msg}</h1>`;
}

/* =====================
   LEVEL DATA
===================== */

// LEVEL 0
const level0 = [
  { type:"radio", text:"What is your gender?", options:["Man","Woman"] },
  { type:"radio", text:"How old are you?", options:["Under 18","18-24","25-34","35-44","45-56","57-70","Over 70"] },
  { type:"radio", text:"What is your job?", options:["Engineer","Firefighter","College"] }
];

// LEVEL 1 — 20 QUESTIONS
const level1 = [
  { type:"text", text:"What motivates you to succeed in life?" },
  { type:"radio", text:"Do you enjoy long-term goals?", options:["Yes","No","Sometimes","Not sure"] },
  { type:"slider", text:"How hard was it to reach your biggest goal? (1–10)" },
  { type:"text", text:"Describe a challenge you recently faced." },
  { type:"radio", text:"Do you prefer working alone or with others?", options:["Alone","With others","Both","Depends"] },
  { type:"slider", text:"How organized are you? (1–10)" },
  { type:"text", text:"What does success mean to you?" },
  { type:"radio", text:"Do you enjoy problem solving?", options:["Yes","No","Sometimes","Not sure"] },
  { type:"slider", text:"How stressful is your daily routine? (1–10)" },
  { type:"slider", text:"Was it hard to achieve your goals? (1–10)" },
  { type:"text", text:"What helps you stay focused?" },
  { type:"radio", text:"Do you plan ahead often?", options:["Always","Sometimes","Rarely","Never"] },
  { type:"slider", text:"How motivated do you feel daily? (1–10)" },
  { type:"text", text:"What is something you want to improve about yourself?" },
  { type:"radio", text:"Do deadlines motivate you?", options:["Yes","No","Sometimes","Stress me"] },
  { type:"slider", text:"How confident are you in your decisions? (1–10)" },
  { type:"text", text:"Describe a moment you felt proud of yourself." },
  { type:"radio", text:"Do you enjoy learning new things?", options:["Yes","No","Sometimes","Depends"] },
  { type:"slider", text:"How satisfied are you with your progress? (1–10)" },
  { type:"text", text:"What keeps you moving forward when things get difficult?" }
];

// LEVEL 2 — 40 QUESTIONS (MIXING)
const level2 = [
  { type:"text", text:"Describe a difficult decision you had to make." },
  { type:"slider", text:"How stressful was that decision? (1–10)" },
  { type:"radio", text:"Do you prefer routine?", options:["Yes","No","Sometimes","Not sure"] },
  { type:"text", text:"What motivates you during hard times?" },
  { type:"slider", text:"How adaptable are you? (1–10)" },
  { type:"radio", text:"Do unexpected events frustrate you?", options:["Yes","No","Sometimes","Depends"] },
  { type:"text", text:"What does stability mean to you?" },
  { type:"slider", text:"How confident are you under pressure? (1–10)" },
  { type:"radio", text:"Do you enjoy taking risks?", options:["Yes","No","Sometimes","Rarely"] },
  { type:"text", text:"Describe a failure that taught you something." },

  { type:"slider", text:"How hard is it for you to stay focused? (1–10)" },
  { type:"radio", text:"Do you prefer planning or improvising?", options:["Planning","Improvising","Both","Neither"] },
  { type:"text", text:"What makes a task feel meaningful?" },
  { type:"slider", text:"How mentally demanding is your work? (1–10)" },
  { type:"radio", text:"Do you enjoy responsibility?", options:["Yes","No","Sometimes","Depends"] },
  { type:"text", text:"What keeps you calm in stressful situations?" },
  { type:"slider", text:"How often do you feel overwhelmed? (1–10)" },
  { type:"radio", text:"Do you enjoy problem-solving?", options:["Yes","No","Sometimes","Rarely"] },
  { type:"text", text:"What helps you recover after setbacks?" },
  { type:"slider", text:"How motivated do you feel right now? (1–10)" },

  { type:"radio", text:"Do you trust your instincts?", options:["Yes","No","Sometimes","Not sure"] },
  { type:"text", text:"Describe a goal you are currently working toward." },
  { type:"slider", text:"How clear are your goals? (1–10)" },
  { type:"radio", text:"Do you prefer structure?", options:["Yes","No","Sometimes","Depends"] },
  { type:"text", text:"What drives you to complete tasks?" },
  { type:"slider", text:"How disciplined are you? (1–10)" },
  { type:"radio", text:"Do you reflect on your decisions?", options:["Often","Sometimes","Rarely","Never"] },
  { type:"text", text:"What do you value most in personal growth?" },
  { type:"slider", text:"How satisfied are you with your direction in life? (1–10)" },
  { type:"radio", text:"Do challenges excite you?", options:["Yes","No","Sometimes","Depends"] }
];

/* =====================
   RENDER
===================== */
function render() {
  const container = document.getElementById("container");
  container.innerHTML = "";

  document.getElementById("topLeft").innerText =
    level === 0 ? "Level 0: Qualification"
    : level === 1 ? "Level 1: Survey"
    : "Level 2: Mixing";

  document.getElementById("topRight").innerText =
    level === 0 ? "" : `Trick Question Chance: ${trickChance.toFixed(2)}%`;

  const questions = level === 0 ? level0 : level === 1 ? level1 : level2;
  const total = level === 0 ? questions.length : level === 1 ? 20 : 40;

  document.getElementById("progress").innerText =
    level === 0 ? "" : `${step}/${total}`;

  // Greeting screen
  if (step === 0) {
    container.innerHTML = `<p>${
      level === 0
        ? "Hello, this survey will take approximately 2.5 minutes."
        : level === 1
        ? "Hello, this survey will take approximately 7 minutes."
        : "Hi, this survey will take you approximately 15min!"
    }</p>`;
    addContinue();
    return;
  }

  const q = questions[step - 1];
  container.innerHTML += `<h2>${q.text}</h2>`;

  if (q.type === "radio") {
    q.options.forEach(o => {
      container.innerHTML +=
        `<label><input type="radio" name="ans"> ${o}</label>`;
    });
  }

  if (q.type === "text") {
    container.innerHTML += `<textarea></textarea>`;
  }

  if (q.type === "slider") {
    container.innerHTML += `<input type="range" min="1" max="10">`;
  }

  addContinue();
}

/* =====================
   CONTINUE
===================== */
function addContinue() {
  const btn = document.createElement("button");
  btn.innerText = "Continue";
  btn.onclick = next;
  document.getElementById("container").appendChild(btn);
}

function next() {
  step++;

  if (level === 0 && step > level0.length) {
    level = 1; step = 0; trickChance = 2.0;
  }

  if (level === 1 && step > 20) {
    level = 2; step = 0; trickChance = 0.0;
  }

  save();
  render();
}

/* =====================
   START
===================== */
loadSave();
render();
</script>

</body>
</html>
