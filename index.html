<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>A Game Of Surveys</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#0f1220;
  --card:#161a2e;
  --accent:#7cf3c0;
  --danger:#ff6b6b;
  --text:#e9ecff;
}
*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,Arial;
  overflow:hidden;
}
canvas{
  position:fixed;
  inset:0;
  z-index:0;
}
#app{
  position:relative;
  z-index:2;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}
.card{
  width:90%;
  max-width:760px;
  background:rgba(22,26,46,.92);
  backdrop-filter:blur(10px);
  padding:26px;
  border-radius:20px;
  box-shadow:0 20px 60px rgba(0,0,0,.5);
}
.top{
  display:flex;
  justify-content:space-between;
  font-size:14px;
}
.warn{color:var(--danger)}
.progress{
  height:12px;
  background:#22286b;
  border-radius:999px;
  overflow:hidden;
  margin:12px 0;
}
.progress div{
  height:100%;
  background:linear-gradient(90deg,var(--accent),#8fd3ff);
}
textarea{
  width:100%;
  min-height:120px;
  background:#0e1230;
  color:white;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.2);
  padding:14px;
}
button{
  background:linear-gradient(180deg,#8af3c8,#57d6a1);
  border:none;
  padding:12px 18px;
  border-radius:14px;
  font-weight:700;
  cursor:pointer;
}
button:disabled{opacity:.4;cursor:not-allowed}
.center{text-align:center}
.row{
  display:flex;
  gap:12px;
  justify-content:center;
  flex-wrap:wrap;
}
.money{
  font-size:38px;
  color:var(--accent);
}
.float{
  position:absolute;
  pointer-events:none;
  font-weight:800;
  animation:floatUp 1s ease forwards;
}
@keyframes floatUp{
  from{opacity:1;transform:translateY(0)}
  to{opacity:0;transform:translateY(-40px)}
}
</style>
</head>

<body>
<canvas id="bg"></canvas>
<div id="app"></div>

<script>
/* ========== PARTICLES ========== */
const canvas=document.getElementById("bg");
const ctx=canvas.getContext("2d");
let W,H,particles=[];
function resize(){
  W=canvas.width=innerWidth;
  H=canvas.height=innerHeight;
}
addEventListener("resize",resize);
resize();
for(let i=0;i<140;i++){
  particles.push({
    x:Math.random()*W,
    y:Math.random()*H,
    r:Math.random()*2+.6,
    vx:(Math.random()-.5)*.35,
    vy:(Math.random()-.5)*.35
  });
}
(function tick(){
  ctx.clearRect(0,0,W,H);
  for(const p of particles){
    p.x+=p.vx;p.y+=p.vy;
    if(p.x<0||p.x>W)p.vx*=-1;
    if(p.y<0||p.y>H)p.vy*=-1;
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fillStyle="rgba(124,243,192,.35)";
    ctx.fill();
  }
  requestAnimationFrame(tick);
})();

/* ========== QUESTIONS ========== */
const QUESTIONS=[
"What does success mean to you?",
"What motivates you to stay focused?",
"How do you handle stress?",
"What skill are you improving?",
"What makes work meaningful?",
"What inspires creativity?",
"What defines progress?",
"What keeps you motivated?",
"What builds confidence?",
"What does leadership mean?",
"What helps teamwork succeed?",
"What drives improvement?",
"What inspires learning?",
"What keeps you disciplined?",
"What defines balance?",
"What motivates long-term goals?",
"What helps overcome setbacks?",
"What makes goals worthwhile?",
"What encourages growth?",
"What does responsibility mean?"
];

const app=document.getElementById("app");
let state=JSON.parse(localStorage.getItem("save"))||{
  q:0,trickChance:5,inTrick:false,trick:null
};
const save=()=>localStorage.setItem("save",JSON.stringify(state));

/* ========== SURVEY ========== */
function renderSurvey(){
  save();
  if(state.inTrick && !state.trick) state.inTrick=false;
  if(state.inTrick) return renderTrick();
  if(state.q>=QUESTIONS.length)
    return app.innerHTML='<div class="card center"><h2>Survey Complete ðŸŽ‰</h2></div>';

  const pct=Math.round((state.q/QUESTIONS.length)*100);
  app.innerHTML=`
  <div class="card">
    <div class="top">
      <div>${state.q+1}/${QUESTIONS.length}</div>
      <div class="${state.trickChance>=50?'warn':''}">
        Trick Chance: ${state.trickChance}%
      </div>
    </div>
    <div class="progress"><div style="width:${pct}%"></div></div>
    <p>${QUESTIONS[state.q]}</p>
    <textarea id="ans"></textarea>
    <div class="row">
      <button id="next" disabled>Continue</button>
    </div>
  </div>`;
  const ans=document.getElementById("ans");
  const next=document.getElementById("next");
  ans.oninput=()=>next.disabled=!ans.value.trim().match(/\b\w+\b/);
  next.onclick=()=>{
    state.q++;
    state.trickChance=Math.min(100,state.trickChance+1);
    if(Math.random()*100<state.trickChance) spawnTrick();
    renderSurvey();
  };
}

/* ========== TRICKS ========== */
function spawnTrick(){
  state.inTrick=true;
  const r=Math.random();
  if(r<.25) state.trick={type:"letter"};
  else if(r<.5) state.trick={type:"image"};
  else if(r<.75) state.trick={type:"slider",target:1+Math.floor(Math.random()*10)};
  else state.trick={type:"clicker",score:0,ppc:1,crit:.1,multi:2};
}

function renderTrick(){
  const t=state.trick;
  if(t.type==="letter")
    app.innerHTML=`<div class="card center"><h3>Select D</h3>${["A","B","C","D"].map(l=>`<button onclick="lPick('${l}')">${l}</button>`).join("")}</div>`;
  if(t.type==="image")
    app.innerHTML=`<div class="card center"><img src="tomato.png" width="200"><div class="row">${["Corn","Tomato","Egg","Avocado"].map(o=>`<button onclick="iPick('${o}')">${o}</button>`).join("")}</div></div>`;
  if(t.type==="slider")
    app.innerHTML=`<div class="card center"><h3>Slide to ${t.target}</h3><input type="range" id="s" min="1" max="10"><button onclick="sPick()">Submit</button></div>`;
  if(t.type==="clicker") renderClicker();
}

function lPick(l){l==="D"?passTrick():reset()}
function iPick(o){o==="Tomato"?passTrick():reset()}
function sPick(){document.getElementById("s").value==state.trick.target?passTrick():reset()}
function passTrick(){state.inTrick=false;state.trick=null;renderSurvey()}
function reset(){localStorage.removeItem("save");location.reload()}

/* ========== START ========== */
renderSurvey();
</script>
</body>
</html>
