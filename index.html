<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>A Game Of Surveys — Fixed Clicker</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
:root{
--bg:#0f1220;--card:#161a2e;--accent:#7cf3c0;--danger:#ff6b6b;--text:#e9ecff
}
*{box-sizing:border-box}
body{
margin:0;
background:radial-gradient(1200px 600px at 10% -10%,#1c2240,transparent),var(--bg);
color:var(--text);
font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
overflow:hidden
}
canvas{display:block}
#ui{position:fixed;inset:0;pointer-events:none}
.panel{
pointer-events:auto;
max-width:760px;
margin:40px auto;
background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
border-radius:20px;
padding:26px;
box-shadow:0 20px 60px rgba(0,0,0,.45)
}
.center{text-align:center}
.row{display:flex;gap:12px;flex-wrap:wrap;justify-content:center}
button{
background:linear-gradient(180deg,#8af3c8,#57d6a1);
border:none;
padding:12px 20px;
border-radius:14px;
font-weight:700;
cursor:pointer
}
button:disabled{opacity:.4;cursor:not-allowed}
.money{font-size:40px;color:var(--accent)}
.progress{
height:10px;
background:#22286b;
border-radius:999px;
overflow:hidden;
margin:12px 0
}
.progress>div{
height:100%;
background:linear-gradient(90deg,var(--accent),#8fd3ff)
}
.shop button{flex:1}
</style>
</head>

<body>

<canvas id="bg"></canvas>
<div id="ui"></div>

<script>
/* ===== Canvas ===== */
const canvas=document.getElementById("bg"),ctx=canvas.getContext("2d");
function resize(){canvas.width=innerWidth;canvas.height=innerHeight}
addEventListener("resize",resize);resize();
const parts=[...Array(120)].map(()=>({x:Math.random()*canvas.width,y:Math.random()*canvas.height,vx:(Math.random()-.5)*.4,vy:(Math.random()-.5)*.4,r:Math.random()*2+1}));
(function loop(){
ctx.clearRect(0,0,canvas.width,canvas.height);
for(const p of parts){
p.x+=p.vx;p.y+=p.vy;
if(p.x<0||p.x>canvas.width)p.vx*=-1;
if(p.y<0||p.y>canvas.height)p.vy*=-1;
ctx.beginPath();
ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
ctx.fillStyle="rgba(124,243,192,.35)";
ctx.fill();
}
requestAnimationFrame(loop);
})();

/* ===== UI Helper ===== */
const ui=document.getElementById("ui");
const panel=html=>ui.innerHTML=`<div class="panel">${html}</div>`;

/* ===== Game State ===== */
let inClicker=true; // force demo
let clicker={
score:0,
ppc:1,
prices:{p1:100,p10:1000,p100:10000}
};

/* ===== Clicker Render ===== */
function renderClicker(){
panel(`
<h2 class="center">Clicker Verification</h2>

<div class="money center" id="score">${clicker.score}</div>

<div class="progress">
  <div style="width:${Math.min(100,clicker.score/1_000_000*100)}%"></div>
</div>

<p class="center">PPC: <b id="ppc">${clicker.ppc}</b></p>

<div class="row">
  <button id="clickBtn">Click</button>
</div>

<div class="shop">
<p><b>Upgrades</b></p>
<div class="row">
  <button id="u1">+1 PPC (${Math.floor(clicker.prices.p1)})</button>
  <button id="u10">+10 PPC (${Math.floor(clicker.prices.p10)})</button>
  <button id="u100">+100 PPC (${Math.floor(clicker.prices.p100)})</button>
</div>
</div>

${clicker.score>=1_000_000?'<div class="row"><button id="cont">Continue</button></div>':""}
`);

bindClickerEvents();
}

/* ===== Bind Events (CRITICAL FIX) ===== */
function bindClickerEvents(){
document.getElementById("clickBtn").onclick=()=>{
clicker.score+=clicker.ppc;
updateClickerUI();
};

document.getElementById("u1").onclick=()=>buy("p1",1);
document.getElementById("u10").onclick=()=>buy("p10",10);
document.getElementById("u100").onclick=()=>buy("p100",100);

if(clicker.score>=1_000_000){
document.getElementById("cont").onclick=()=>{
panel("<h1 class=center>✅ Passed Clicker</h1>");
};
}
}

/* ===== Update UI WITHOUT RESET ===== */
function updateClickerUI(){
document.getElementById("score").innerText=clicker.score;
document.getElementById("ppc").innerText=clicker.ppc;
document.querySelector(".progress > div").style.width=
Math.min(100,clicker.score/1_000_000*100)+"%";

if(clicker.score>=1_000_000 && !document.getElementById("cont")){
renderClicker(); // add continue button once
}
}

/* ===== Buy Upgrade ===== */
function buy(key,amount){
const cost=clicker.prices[key];
if(clicker.score<cost)return;
clicker.score-=cost;
clicker.ppc+=amount;
clicker.prices[key]*=1.1;
renderClicker();
}

/* ===== Start ===== */
renderClicker();
</script>
</body>
</html>
