<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>A Game Of Surveys â€” Canvas Edition</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
--bg:#0f1220;--card:#161a2e;--accent:#7cf3c0;
--danger:#ff6b6b;--text:#e9ecff;--muted:#9aa3ff}
*{box-sizing:border-box}
body{
margin:0;background:radial-gradient(1200px 600px at 10% -10%,#1c2240,transparent),var(--bg);
color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
overflow:hidden}
canvas{display:block}
#ui{position:fixed;inset:0;pointer-events:none}
.panel{
pointer-events:auto;max-width:760px;margin:40px auto;
background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.12);
border-radius:20px;padding:26px;box-shadow:0 20px 60px rgba(0,0,0,.45)}
.top{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.badge{padding:6px 12px;border-radius:999px;background:#22286b;color:#cfd4ff;font-size:13px}
.badge.danger{background:#4a1d2a;color:#ffb3b3}
.progress{height:10px;background:#22286b;border-radius:999px;overflow:hidden;margin:12px 0}
.progress>div{height:100%;background:linear-gradient(90deg,var(--accent),#8fd3ff)}
textarea{
width:100%;min-height:120px;background:#0e1230;color:var(--text);
border:1px solid rgba(255,255,255,.15);border-radius:14px;padding:14px}
button{
background:linear-gradient(180deg,#8af3c8,#57d6a1);
border:none;padding:12px 20px;border-radius:14px;font-weight:700;cursor:pointer}
.row{display:flex;gap:12px;flex-wrap:wrap}
.options button{flex:1}
.center{text-align:center}
.warn{color:var(--danger);font-weight:700;margin-top:8px}
.money{font-size:42px;color:var(--accent)}
.sliderValue{font-size:22px;font-weight:800;color:var(--accent);text-align:center}
</style>
</head>
<body>

<canvas id="bg"></canvas>
<div id="ui"></div>

<script>
/* ===== CANVAS ===== */
const canvas=bg,ctx=canvas.getContext("2d");
let W,H,particles=[];
function resize(){W=canvas.width=innerWidth;H=canvas.height=innerHeight}
addEventListener("resize",resize);resize();
for(let i=0;i<120;i++)particles.push({
x:Math.random()*W,y:Math.random()*H,r:Math.random()*2+.6,
vx:(Math.random()-.5)*.3,vy:(Math.random()-.5)*.3});
(function tick(){
ctx.clearRect(0,0,W,H);
for(const p of particles){
p.x+=p.vx;p.y+=p.vy;
if(p.x<0||p.x>W)p.vx*=-1;
if(p.y<0||p.y>H)p.vy*=-1;
ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
ctx.fillStyle="rgba(124,243,192,.35)";ctx.fill()}
requestAnimationFrame(tick)})();

/* ===== STATE ===== */
let state={
q:0,answered:[],trickChance:5,inTrick:false,trick:null,warn:0,start:0};

/* ===== SAVE / LOAD ===== */
function save(){localStorage.setItem("surveySave",JSON.stringify(state))}
function load(){
const d=localStorage.getItem("surveySave");
if(!d)return false;
state=JSON.parse(d);return true}
function reset(){localStorage.removeItem("surveySave");location.reload()}

/* ===== QUESTIONS ===== */
const QUESTIONS=[
"What does success mean to you?",
"What motivates you to work hard?",
"Describe a challenge you overcame.",
"How do you handle failure?",
"What skill are you improving right now?",
"What inspires you creatively?",
"How do you stay focused?",
"What is your biggest strength?",
"How do you manage stress?",
"What keeps you disciplined?",
"What does teamwork mean to you?",
"How do you learn best?",
"What drives your personal growth?",
"What does responsibility mean to you?",
"How do you stay organized?",
"What makes work meaningful?",
"How do you handle setbacks?",
"What builds resilience for you?",
"What defines leadership?",
"What motivates long-term goals?"
];
const TOTAL=QUESTIONS.length;
const ui=document.getElementById("ui");
const panel=h=>ui.innerHTML=`<div class=panel>${h}</div>`;
const validText=t=>{
const w=t.trim().split(/\s+/);
return w.length>=6&&new Set(w).size>=4};

/* ===== RENDER ===== */
function render(){
save();
if(state.q>=TOTAL)return finish();
if(state.inTrick)return renderTrick();
renderQuestion();
}

function renderQuestion(){
state.start=Date.now();
const progress=(state.q/TOTAL)*100;
panel(`
<div class=top>
<div class=badge>Question ${state.q+1}/${TOTAL}</div>
<div class="badge ${state.trickChance>=50?"danger":""}">
Trick ${state.trickChance}%
</div>
</div>
<div class=progress><div style="width:${progress}%"></div></div>
<p>${QUESTIONS[state.q]}</p>
<textarea id=a placeholder="Answer honestlyâ€¦"></textarea>
<div class=row><button onclick=submit()>Continue</button></div>
<div id=w class=warn></div>`);
}

function submit(){
if(Date.now()-state.start<4000)return warn("Too fast.");
const t=a.value;
if(!validText(t))return warn("Answer too weak.");
state.q++;state.answered.push(t);
maybeTrick();render();
}

function warn(m){
state.warn++;w.innerText=`âš  ${m} (${state.warn}/2)`;
if(state.warn>=2)kick();
}

function kick(){
localStorage.removeItem("surveySave");
panel(`<h1 class=center>ðŸš« Disqualified</h1>
<p class=center>Progress erased.</p>
<div class=row>
<button onclick=reset()>Restart</button>
</div>`);
}

/* ===== TRICKS ===== */
function maybeTrick(){
state.trickChance=Math.min(100,state.trickChance+1);
if(Math.random()*100<state.trickChance){
state.inTrick=true;spawnTrick();}
}

function spawnTrick(){
const r=Math.random();
if(r<.25)state.trick={t:"letter"};
else if(r<.5)state.trick={t:"image"};
else if(r<.75)state.trick={t:"slider",c:1+Math.floor(Math.random()*10)};
else state.trick={t:"click",s:0};
}

function renderTrick(){
const t=state.trick.t;
if(t==="letter")panel(`<h3>Select D</h3>
<div class="row options">${["A","B","C","D"].map(l=>`<button onclick=letter('${l}')>${l}</button>`).join("")}</div>`);
if(t==="image")panel(`<h3>What is this?</h3>
<img src="tomato.png" style="max-width:200px">
<div class="row options">${["Corn","Tomato","Egg","Avocado"].map(o=>`<button onclick=imagePick('${o}')>${o}</button>`).join("")}</div>`);
if(t==="slider")panel(`<h3>Slide to ${state.trick.c}</h3>
<div class=sliderValue id=sv>5</div>
<input type=range id=s min=1 max=10 value=5 oninput="sv.innerText=this.value">
<div class=row><button onclick=slider()>Submit</button></div>`);
if(t==="click")panel(`<h3>Click 50 times</h3>
<h2 class=center id=sc>${state.trick.s}</h2>
<div class=row><button onclick=clicker()>Click Me</button></div>`);
}

function letter(l){l==="D"?pass():kick()}
function imagePick(o){o==="Tomato"?pass():kick()}
function slider(){s.value==state.trick.c?pass():kick()}
function clicker(){
state.trick.s++;sc.innerText=state.trick.s;
if(state.trick.s>=50)pass();
}
function pass(){
state.inTrick=false;state.trick=null;render();
}

function finish(){
panel(`<h1 class=center>ðŸŽ‰ Survey Completed</h1>
<p class=center>You passed all checks.</p>
<div class=row><button onclick=reset()>Restart</button></div>`);
}

/* ===== START ===== */
if(!load()){
panel(`<h1 class=center>A Game Of Surveys</h1>
<p class=center>Your progress is saved automatically.</p>
<div class=row center>
<button onclick=render()>Start</button>
</div>`);
}else render();
</script>
</body>
</html>
